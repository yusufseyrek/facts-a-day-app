# Fact Detail Screen Screenshot Flow
# Assumes we're on home screen from previous flow

appId: dev.seyrek.factsaday

---
# Wait for any loading/animations to settle before interacting with list
- waitForAnimationToEnd:
    timeout: 3000

# Wait for first fact card to be visible and stable
- extendedWaitUntil:
    visible:
      id: "fact-card-.*"
    timeout: 10000

# Extra settle time for FlashList recycling to complete
- waitForAnimationToEnd:
    timeout: 1000

# Tap on the first fact card with retry logic
- tapOn:
    id: "fact-card-.*"
    index: 0
    retryTapIfNoChange: true

# Wait for fact detail modal
- extendedWaitUntil:
    visible:
      id: "fact-modal-close-button"
    timeout: 5000

# Take screenshot
- takeScreenshot: ${OUTPUT_DIR}/02_fact_detail

# Close modal - iOS uses X button, Android uses back key
- runFlow:
    when:
      platform: iOS
    commands:
      - tapOn:
          id: "fact-modal-close-button"
          retryTapIfNoChange: true
      - waitForAnimationToEnd:
          timeout: 1000

- runFlow:
    when:
      platform: Android
    commands:
      - pressKey: back
      - waitForAnimationToEnd:
          timeout: 1000
