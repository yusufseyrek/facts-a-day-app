# Trivia Game Screen Screenshot Flow
# Assumes we're on trivia hub from previous flow

appId: dev.seyrek.factsaday

---
# Wait for screen to stabilize
- waitForAnimationToEnd:
    timeout: 1000

# Tap on Mixed Trivia card (or Daily if mixed unavailable)
- tapOn:
    id: "trivia-card-mixed"
    optional: true
    retryTapIfNoChange: true

- tapOn:
    id: "trivia-card-daily"
    optional: true
    retryTapIfNoChange: true

# Wait for intro modal
- extendedWaitUntil:
    visible:
      id: "trivia-start-button"
    timeout: 8000

# Tap Start button
- tapOn:
    id: "trivia-start-button"
    retryTapIfNoChange: true

# Wait for game to load (question animations)
- waitForAnimationToEnd:
    timeout: 3000

# Take screenshot
- takeScreenshot: ${OUTPUT_DIR}/06_trivia_game

# Wait for screen to be fully stable before exit (prevents stale element issues)
- waitForAnimationToEnd:
    timeout: 1000

# First verify exit button is visible
- extendedWaitUntil:
    visible:
      id: "trivia-game-exit-button"
    timeout: 5000

# Exit the game - tap and wait for modal animation
- tapOn:
    id: "trivia-game-exit-button"
    retryTapIfNoChange: true

# Wait for modal animation to start (fade + spring animation)
- waitForAnimationToEnd:
    timeout: 1000

# Wait for exit modal confirm button to be visible
- extendedWaitUntil:
    visible:
      id: "trivia-exit-confirm"
    timeout: 8000

# Extra wait for modal animation to fully complete (springify)
- waitForAnimationToEnd:
    timeout: 500

# Confirm exit
- tapOn:
    id: "trivia-exit-confirm"
    retryTapIfNoChange: true

# Wait to return to trivia hub
- waitForAnimationToEnd:
    timeout: 2000
